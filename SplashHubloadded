local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "Splash Hub v1",
    LoadingTitle = "Splash Hub",
    LoadingSubtitle = "by pom,",
    ConfigurationSaving = {Enabled = true, FolderName = "MyAwesomeUI"}
})

-- Tabs
local MainTab = Window:CreateTab("Player", 4483362458)
local VisualTab = Window:CreateTab("Visual", 4483362458)
local AimTab = Window:CreateTab("Aim", 4483362458)

-- Services
local player = game.Players.LocalPlayer
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local cam = workspace.CurrentCamera
local mouse = player:GetMouse()

-- Character
local char, hrp, hum
local normalWalkSpeed = 16
local function updateChar(c)
    char = c
    hrp = c:FindFirstChild("HumanoidRootPart") or c.PrimaryPart
    hum = c:FindFirstChild("Humanoid")
    if hum then normalWalkSpeed = hum.WalkSpeed end
end
player.CharacterAdded:Connect(updateChar)
if player.Character then updateChar(player.Character) end

-- ===== Player variables =====
local flying, FlySpeed = false, 50
local moveKeys = {W=false, A=false, S=false, D=false, Space=false, Shift=false}
local noclip=false
local infinityJump=false
local walkLock=false
local speedBoost=false
local boostAmount=10
local maxZoomEnabled=false
local FOV=60

local ESPEnabled=false
local ESPFolder = Instance.new("Folder", workspace)
ESPFolder.Name="ESPFolder"

local AutoAimEnabled=false
local AutoAimRange=10

-- Aim variables
local AimBotEnabled=false
local SilentAimEnabled=false
local AimRange=10

-- ===== Key Input =====
UIS.InputBegan:Connect(function(input, gp)
    if gp then return end
    local k = input.KeyCode
    if k==Enum.KeyCode.W then moveKeys.W=true end
    if k==Enum.KeyCode.A then moveKeys.A=true end
    if k==Enum.KeyCode.S then moveKeys.S=true end
    if k==Enum.KeyCode.D then moveKeys.D=true end
    if k==Enum.KeyCode.Space then moveKeys.Space=true end
    if k==Enum.KeyCode.LeftShift then moveKeys.Shift=true end
    -- AutoAim toggle via R
    if k==Enum.KeyCode.R then AutoAimEnabled=not AutoAimEnabled end
end)
UIS.InputEnded:Connect(function(input, gp)
    if gp then return end
    local k = input.KeyCode
    if k==Enum.KeyCode.W then moveKeys.W=false end
    if k==Enum.KeyCode.A then moveKeys.A=false end
    if k==Enum.KeyCode.S then moveKeys.S=false end
    if k==Enum.KeyCode.D then moveKeys.D=false end
    if k==Enum.KeyCode.Space then moveKeys.Space=false end
    if k==Enum.KeyCode.LeftShift then moveKeys.Shift=false end
end)

-- ===== RenderStepped =====
RunService.RenderStepped:Connect(function()
    if hrp and hum then
        -- Fly
        if flying then
            local dir=Vector3.zero
            local cf=cam.CFrame
            if moveKeys.W then dir+=cf.LookVector end
            if moveKeys.S then dir-=cf.LookVector end
            if moveKeys.A then dir-=cf.RightVector end
            if moveKeys.D then dir+=cf.RightVector end
            if moveKeys.Space then dir+=Vector3.yAxis end
            if moveKeys.Shift then dir-=Vector3.yAxis end
            hrp.Velocity=(dir.Magnitude>0 and dir.Unit*FlySpeed) or Vector3.zero
        end
        -- WalkLegArmLock
        if walkLock then
            for _,track in pairs(hum:GetPlayingAnimationTracks()) do track:Stop() end
        end
        -- SpeedBoost
        hum.WalkSpeed=(speedBoost and (normalWalkSpeed+boostAmount)) or normalWalkSpeed
    end

    -- FOV
    cam.FieldOfView=FOV
    -- MaxZoomCamera
    if maxZoomEnabled then cam.CameraType=Enum.CameraType.Custom end

    -- AutoAim
    if AutoAimEnabled and hrp then
        for _,p in pairs(game.Players:GetPlayers()) do
            if p~=player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                local target = p.Character.HumanoidRootPart
                if (target.Position - hrp.Position).Magnitude <= AutoAimRange then
                    cam.CFrame = CFrame.new(cam.CFrame.Position, target.Position)
                    mouse1click()
                    AutoAimEnabled=false
                    break
                end
            end
        end
    end

    -- AimBot
    if AimBotEnabled and hrp then
        for _,p in pairs(game.Players:GetPlayers()) do
            if p~=player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                local target = p.Character.HumanoidRootPart
                if (target.Position - hrp.Position).Magnitude <= AimRange then
                    cam.CFrame = CFrame.new(cam.CFrame.Position, target.Position)
                    mouse1click()
                    break
                end
            end
        end
    end

    -- Silent Aim
    if SilentAimEnabled and hrp then
        for _,p in pairs(game.Players:GetPlayers()) do
            if p~=player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                local target = p.Character.HumanoidRootPart
                if (target.Position - hrp.Position).Magnitude <= AimRange then
                    cam.CFrame = CFrame.new(cam.CFrame.Position, target.Position)
                    -- Flingライン処理: 実際のゲーム依存
                    break
                end
            end
        end
    end

    -- ESP
    if ESPEnabled then
        for _,p in pairs(game.Players:GetPlayers()) do
            if p~=player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                if not ESPFolder:FindFirstChild(p.Name) then
                    local billboard = Instance.new("BillboardGui")
                    billboard.Name=p.Name
                    billboard.Adornee=p.Character.HumanoidRootPart
                    billboard.Size=UDim2.new(0,50,0,50)
                    billboard.AlwaysOnTop=true
                    local text = Instance.new("TextLabel", billboard)
                    text.Size=UDim2.new(1,0,1,0)
                    text.BackgroundTransparency=1
                    text.Text=p.Name
                    text.TextColor3=Color3.new(1,0,0)
                    text.TextScaled=true
                    billboard.Parent=ESPFolder
                end
            else
                if ESPFolder:FindFirstChild(p.Name) then ESPFolder[p.Name]:Destroy() end
            end
        end
    else
        ESPFolder:ClearAllChildren()
    end
end)

-- Noclip
RunService.Stepped:Connect(function()
    if noclip and char then
        for _,v in pairs(char:GetDescendants()) do
            if v:IsA("BasePart") then v.CanCollide=false end
        end
    end
end)

-- Infinity Jump
UIS.JumpRequest:Connect(function()
    if infinityJump and hum then hum:ChangeState(Enum.HumanoidStateType.Jumping) end
end)

-- ===== Visual Tab =====
local cloudToggle=false
local cloudColor=Color3.fromRGB(135,206,235)
local allPartToggle=false
local allPartColor=Color3.fromRGB(255,255,255)
local sky = workspace:FindFirstChildOfClass("Sky") or Instance.new("Sky", workspace)

RunService.RenderStepped:Connect(function()
    if cloudToggle then
        Lighting.OutdoorAmbient = cloudColor
        sky.SkyboxBk=""; sky.SkyboxFt=""; sky.SkyboxUp=""; sky.SkyboxDn=""; sky.SkyboxLf=""; sky.SkyboxRt=""
    end
    if allPartToggle then
        for _,p in pairs(workspace:GetDescendants()) do
            if p:IsA("BasePart") then p.Color=allPartColor end
        end
    end
end)

-- ===== Rayfield UI =====
-- Player Tab
MainTab:CreateToggle({Name="Fly", CurrentValue=false, Callback=function(v) flying=v end})
MainTab:CreateSlider({Name="Fly Speed", Range={10,200}, Increment=1, CurrentValue=FlySpeed, Callback=function(v) FlySpeed=v end})
MainTab:CreateToggle({Name="Noclip", CurrentValue=false, Callback=function(v) noclip=v end})
MainTab:CreateToggle({Name="Infinity Jump", CurrentValue=false, Callback=function(v) infinityJump=v end})
MainTab:CreateToggle({Name="WalkLegArmLock", CurrentValue=false, Callback=function(v) walkLock=v end})
MainTab:CreateToggle({Name="SpeedBoost", CurrentValue=false, Callback=function(v) speedBoost=v end})
MainTab:CreateSlider({Name="FOV", Range={60,120}, Increment=1, CurrentValue=FOV, Callback=function(v) FOV=v end})
MainTab:CreateToggle({Name="MaxZoomCamera", CurrentValue=false, Callback=function(v) maxZoomEnabled=v end})
MainTab:CreateToggle({Name="ESP", CurrentValue=false, Callback=function(v) ESPEnabled=v end})
MainTab:CreateToggle({Name="AutoAim", CurrentValue=false, Callback=function(v) AutoAimEnabled=v end})
MainTab:CreateSlider({Name="AutoAim Range", Range={1,50}, Increment=1, CurrentValue=AutoAimRange, Callback=function(v) AutoAimRange=v end})

-- Visual Tab
VisualTab:CreateToggle({Name="Cloud Color Toggle", CurrentValue=false, Callback=function(v) cloudToggle=v end})
VisualTab:CreateColorPicker({Name="Cloud Color", Default=cloudColor, Callback=function(c) cloudColor=c end})
VisualTab:CreateToggle({Name="All Part Color Toggle", CurrentValue=false, Callback=function(v) allPartToggle=v end})
VisualTab:CreateColorPicker({Name="All Part Color", Default=allPartColor, Callback=function(c) allPartColor=c end})

-- Aim Tab
AimTab:CreateToggle({Name="AimBot", CurrentValue=false, Callback=function(v) AimBotEnabled=v end})
AimTab:CreateToggle({Name="Silent Aim", CurrentValue=false, Callback=function(v) SilentAimEnabled=v end})
AimTab:CreateSlider({Name="Aim Range", Range={1,50}, Increment=1, CurrentValue=AimRange, Callback=function(v) AimRange=v end})
