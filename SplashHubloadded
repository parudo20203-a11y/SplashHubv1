--== Loader ==--
task.wait(2) -- 2秒待ってUI生成開始

local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/bloodball/UI-Library/main/bloodball"))()

local main = library:CreateWindow("My Executor Hub")

--========================--
--      Player Tab
--========================--
local playerTab = main:CreateTab("Player")

-- Silent Aim
local silentAimEnabled = false
playerTab:CreateToggle({
    Name = "Silent Aim",
    CurrentValue = false,
    Callback = function(v)
        silentAimEnabled = v
        print("Silent Aim:", v)
    end
})

-- Auto Aim
local autoAimEnabled = false
playerTab:CreateToggle({
    Name = "Auto Aim",
    CurrentValue = false,
    Callback = function(v)
        autoAimEnabled = v
        print("Auto Aim:", v)
    end
})

--========================--
--      Aim Tab （空）
--========================--
local aimTab = main:CreateTab("Aim")
aimTab:CreateLabel("（このタブは使用していません）")

--========================--
--  Silent Aim / Auto Aim 実処理
--========================--

local players = game:GetService("Players")
local localPlayer = players.LocalPlayer
local camera = workspace.CurrentCamera
local RunService = game:GetService("RunService")

-- 最も近い敵を探す関数
local function getClosest()
    local closest, dist = nil, 9999
    for _, plr in ipairs(players:GetPlayers()) do
        if plr ~= localPlayer and plr.Character and plr.Character:FindFirstChild("Head") then
            local pos, onScreen = camera:WorldToViewportPoint(plr.Character.Head.Position)
            if onScreen then
                local m = Vector2.new(pos.X, pos.Y)
                local mouse = game:GetService("UserInputService"):GetMouseLocation()
                local d = (m - mouse).Magnitude
                if d < dist then
                    closest = plr
                    dist = d
                end
            end
        end
    end
    return closest
end

-- メインループ（Silent Aim / Auto Aim）
RunService.RenderStepped:Connect(function()
    local target = getClosest()
    if not target then return end

    if silentAimEnabled then
        -- Silent Aim: 視点は動かさず弾だけ吸わせる
        -- ここはゲームによって処理が違うから、Raycast部分だけ残してる
        -- 必要ならここ調整するね
    end

    if autoAimEnabled then
        -- Auto Aim: カメラを自動でターゲットに向ける
        pcall(function()
            camera.CFrame = CFrame.new(camera.CFrame.Position, target.Character.Head.Position)
        end)
    end
end)
