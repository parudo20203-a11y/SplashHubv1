local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "Splash Hub v1",
    LoadingTitle = "Splash Hub",
    LoadingSubtitle = "by pom,",
    ConfigurationSaving = {Enabled = true, FolderName = "MyAwesomeUI"}
})

local MainTab = Window:CreateTab("Player", 4483362458)
local VisualTab = Window:CreateTab("Visual", 4483362458)

-- Services
local player = game.Players.LocalPlayer
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local cam = workspace.CurrentCamera

-- Character
local char, hrp, hum
local normalWalkSpeed = 16
local function updateChar(c)
    char = c
    hrp = c:FindFirstChild("HumanoidRootPart") or c.PrimaryPart
    hum = c:FindFirstChild("Humanoid")
    if hum then normalWalkSpeed = hum.WalkSpeed end
end
player.CharacterAdded:Connect(updateChar)
if player.Character then updateChar(player.Character) end

-- ===== Fly =====
local flying, FlySpeed = false, 50
local moveKeys = {W=false, A=false, S=false, D=false, Space=false, Shift=false}
UIS.InputBegan:Connect(function(input, gp)
    if gp then return end
    local k = input.KeyCode
    if k == Enum.KeyCode.W then moveKeys.W=true end
    if k == Enum.KeyCode.A then moveKeys.A=true end
    if k == Enum.KeyCode.S then moveKeys.S=true end
    if k == Enum.KeyCode.D then moveKeys.D=true end
    if k == Enum.KeyCode.Space then moveKeys.Space=true end
    if k == Enum.KeyCode.LeftShift then moveKeys.Shift=true end
end)
UIS.InputEnded:Connect(function(input, gp)
    if gp then return end
    local k = input.KeyCode
    if k == Enum.KeyCode.W then moveKeys.W=false end
    if k == Enum.KeyCode.A then moveKeys.A=false end
    if k == Enum.KeyCode.S then moveKeys.S=false end
    if k == Enum.KeyCode.D then moveKeys.D=false end
    if k == Enum.KeyCode.Space then moveKeys.Space=false end
    if k == Enum.KeyCode.LeftShift then moveKeys.Shift=false end
end)
RunService.RenderStepped:Connect(function()
    if flying and hrp then
        local dir = Vector3.zero
        local cf = cam.CFrame
        if moveKeys.W then dir+=cf.LookVector end
        if moveKeys.S then dir-=cf.LookVector end
        if moveKeys.A then dir-=cf.RightVector end
        if moveKeys.D then dir+=cf.RightVector end
        if moveKeys.Space then dir+=Vector3.yAxis end
        if moveKeys.Shift then dir-=Vector3.yAxis end
        hrp.Velocity=(dir.Magnitude>0 and dir.Unit*FlySpeed) or Vector3.zero
    end
end)

-- ===== Noclip =====
local noclip=false
RunService.Stepped:Connect(function()
    if noclip and char then
        for _,v in pairs(char:GetDescendants()) do
            if v:IsA("BasePart") then v.CanCollide=false end
        end
    end
end)

-- ===== Infinity Jump =====
local infinityJump=false
UIS.JumpRequest:Connect(function()
    if infinityJump and hum then hum:ChangeState(Enum.HumanoidStateType.Jumping) end
end)

-- ===== WalkLegArmLock =====
local walkLock=false
RunService.RenderStepped:Connect(function()
    if walkLock and hum then
        for _,track in pairs(hum:GetPlayingAnimationTracks()) do track:Stop() end
    end
end)

-- ===== SpeedBoost =====
local speedBoost=false
local boostAmount=10
RunService.RenderStepped:Connect(function()
    if hum then hum.WalkSpeed=(speedBoost and (normalWalkSpeed+boostAmount)) or normalWalkSpeed end
end)

-- ===== FOV =====
local FOV=70
RunService.RenderStepped:Connect(function()
    cam.FieldOfView=FOV
end)

-- ===== MaxZoomCamera =====
local maxZoomEnabled=false
RunService.RenderStepped:Connect(function()
    if maxZoomEnabled then cam.CameraType=Enum.CameraType.Custom end
end)

-- ===== Visual: Cloud & All Part Color =====
local cloudToggle=false
local cloudColor=Color3.fromRGB(135,206,235)
local allPartToggle=false
local allPartColor=Color3.fromRGB(255,255,255)

-- 空の Sky オブジェクトを作成
local sky = workspace:FindFirstChildOfClass("Sky") or Instance.new("Sky", workspace)

RunService.RenderStepped:Connect(function()
    if cloudToggle then
        -- 空の色を変更
        Lighting.OutdoorAmbient = cloudColor
        sky.SkyboxBk=""; sky.SkyboxDn=""; sky.SkyboxFt=""; sky.SkyboxLf=""; sky.SkyboxRt=""; sky.SkyboxUp=""
    end
    if allPartToggle then
        for _,p in pairs(workspace:GetDescendants()) do
            if p:IsA("BasePart") then p.Color=allPartColor end
        end
    end
end)

-- ===== Rayfield UI =====
MainTab:CreateToggle({Name="Fly", CurrentValue=false, Callback=function(v) flying=v end})
MainTab:CreateSlider({Name="Fly Speed", Range={10,200}, Increment=1, CurrentValue=FlySpeed, Callback=function(v) FlySpeed=v end})
MainTab:CreateToggle({Name="Noclip", CurrentValue=false, Callback=function(v) noclip=v end})
MainTab:CreateToggle({Name="Infinity Jump", CurrentValue=false, Callback=function(v) infinityJump=v end})
MainTab:CreateToggle({Name="WalkLegArmLock", CurrentValue=false, Callback=function(v) walkLock=v end})
MainTab:CreateToggle({Name="SpeedBoost", CurrentValue=false, Callback=function(v) speedBoost=v end})
MainTab:CreateSlider({Name="FOV", Range={70,120}, Increment=1, CurrentValue=FOV, Callback=function(v) FOV=v end})
MainTab:CreateToggle({Name="MaxZoomCamera", CurrentValue=false, Callback=function(v) maxZoomEnabled=v end})

VisualTab:CreateToggle({Name="Cloud Color Toggle", CurrentValue=false, Callback=function(v) cloudToggle=v end})
VisualTab:CreateColorPicker({Name="Cloud Color", Default=cloudColor, Callback=function(c) cloudColor=c end})
VisualTab:CreateToggle({Name="All Part Color Toggle", CurrentValue=false, Callback=function(v) allPartToggle=v end})
VisualTab:CreateColorPicker({Name="All Part Color", Default=allPartColor, Callback=function(c) allPartColor=c end})
